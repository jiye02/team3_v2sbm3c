<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="user-scalable=yes, initial-scale=1.0, maximum-scale=5.0, width=device-width" /> 
<title>http://localhost:9091/javascript/input_form.html</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link href="../css/style.css" rel="Stylesheet" type="text/css"> <!-- /static -->
<script type="text/javascript">
   function comma(su) {
     // 정수가 4자리이상인 경우 오른쪽기준 숫자 3자리식 분리하여 ','를
     // 포함하는 정규 표현식
     return su.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
   }

  function basic() {
    frm.rname.value="바다 전망 30평"; // 폼이름.태그 이름(name 속성).value
    frm.py.value=30;
    frm.cnt.value=3;
  }
  
  function increase() {
    let cnt = parseInt(frm.cnt.value);

    cnt = cnt + 1;

    if (cnt > 10) {
      document.getElementById("msg").innerHTML="최대 인원은 10명입니다.";
      cnt = 10;
    } else {
      document.getElementById("msg").innerHTML="";
    }

    frm.cnt.value = cnt;
  }

  function decrease() {
    let cnt = parseInt(frm.cnt.value);

    cnt = cnt - 1;

    if (cnt < 1) {
      document.getElementById("msg").innerHTML="최소 인원은 1명입니다.";
      cnt = 1;
    } else {
      document.getElementById("msg").innerHTML="";
    }

    frm.cnt.value = cnt;
  }

  // 결재 금액
  function price() {
    let py = parseInt(frm.py.value);
    let cnt = parseInt(frm.cnt.value);

    let amount = (py * 10000) + (cnt * 5000);
    document.getElementById("msg").innerHTML = "결재 금액: " + comma(amount) + " 원";

  }

  function send() {
    let sw = confirm("예약 하시겠습니까?");
    // alert("sw: " + sw); // true, false
    if (sw == true) {
      frm.submit();
    } else {
      alert("예약을 취소 합니다.");
    }
  }
  
  function price2() {
	  let cnt = parseInt(frm2.cnt.value);
	  document.getElementById("msg2").innerHTML = "추가 인원 금액: " + comma(cnt * 5000);
  }
</script>
</head>
<body>
<DIV class="container_main">
  <DIV class="content">
    <DIV class="title_line">펜션 예약</DIV>
    <form name="frm" action="./input_proc.jsp" method="post">
      <ul>
        <li class="li_none"> <!-- required="required": 필수 -->
          객실: <input type="text" name="rname" id="rname" value="" required="required">
        </li>
        <li class="li_none">
          크기: <input type="number" name="py" id="py" value="" step="1" min="5" max="50"> 평
        </li>
        <li class="li_none">
          인원: <input type="number" name="cnt" id="cnt" value="" step="1" min="1" max="10"> 명
        </li>
        <li class="li_none"> <!-- 각종 메시지 출력 -->
          <DIV id="msg" style="background-color: #FFFFFF; color: #0000FF;"></DIV>
        </li>
        <li class="li_none">
          <button type="button" onclick="basic();" class="btn btn-info btn-sm">기본 예약</button>
          <button type="button" onclick="increase();" class="btn btn-info btn-sm">인원 증가(+)</button>
          <button type="button" onclick="decrease();" class="btn btn-info btn-sm">인원 감소(-)</button>
          <button type="reset" class="btn btn-info btn-sm">입력값 삭제</button>
          <button type="button" onclick="price();" class="btn btn-info btn-sm">금액계산</button>
          <button type="submit" class="btn btn-info btn-sm">신청 1</button>
          <button type="button" onclick="send()" class="btn btn-info btn-sm">신청 2</button>
        </li>
        <li class="li_none">
        </li>
      </ul>
    </form>
    <br>
    추가 옵션<BR>
    <form name="frm2">
      <ul>
        <li class="li_none">
          인원: <input type="number" name="cnt" value="" step="1" min="1" max="10"> 명
        </li>
        <li class="li_none"> <!-- 각종 메시지 출력 -->
            <div id="msg2" style="background-color: #FFFFFF; color: #0000FF;"></div>
          </li>
        <li class="li_none">
          <button type="button" onclick="price2()" class="btn btn-info">금액 계산</button>
          <a href="javascript:price2()" class="btn btn-light">금액 계산</a>
        </li>
      </ul>  
    </form>
  </DIV>
</DIV>
</body>
</html>