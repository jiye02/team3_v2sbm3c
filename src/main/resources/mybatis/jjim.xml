<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.mvc.jjim.JjimDAOInter">
  
  <!-- 생성 -->
  <insert id="create" parameterType="dev.mvc.jjim.JjimVO" >
    INSERT INTO jjim(jjimno, memberno, galleryno, rdate)
    VALUES(jjim_seq.nextval, #{memberno}, #{galleryno}, sysdate)
  
  </insert>
      

  
  <!-- 삭제 -->
  <delete id="delete" parameterType="dev.mvc.jjim.JjimVO">
    DELETE FROM jjim
    WHERE jjimno = #{jjimno}
  
  </delete>
  
  <select id="list_by_memberno" resultType="dev.mvc.jjim.JjimVO" parameterType="int">
    SELECT jjimno, memberno, galleryno, rdate
    FROM jjim
    WHERE memberno=#{memberno}
    ORDER BY memberno DESC

  </select> 
  <!-- 찜을 했는지 확인후 안했으면 INSERT 실행, 했으면 DELETE 실행 -->
  <select id="check" resultType="int" parameterType="int">
  SELECT COUNT(*) as cnt FROM jjim
  WHERE memberno=#{memberno} AND galleryno=#{galleryno}
    </select> 
  
  
  
</mapper>